(this["webpackJsonpfive-on-4"]=this["webpackJsonpfive-on-4"]||[]).push([[0],{24:function(e,t,a){e.exports=a(45)},29:function(e,t,a){},30:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(21),l=a.n(s),r=a(2),o=(a(29),a(5)),h=a(6),i=a(8),m=a(7),u=a(9),d=a(11),g=(a(30),function(e){var t=e.logged_user,a=e.setStateLoggedUser;return c.a.createElement("div",{className:"header"},c.a.createElement("nav",{className:"header-navigation"},c.a.createElement("ul",{className:"navigation-section"},c.a.createElement("li",null,c.a.createElement(r.b,{to:"/"},"Home")),c.a.createElement("li",null,c.a.createElement(r.b,{to:"/matches"},"Matches")),c.a.createElement("li",null,c.a.createElement(r.b,{to:"/creatematch"},"Create Match"))),c.a.createElement("ul",{className:"navigation-section"},t.name?c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,"Hello, ",t.name.charAt(0).toUpperCase()+t.name.slice(1),". Signed up matches: ",t.joined_matches.length),c.a.createElement("li",{onClick:a},"Logout")):c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement(r.b,{to:"/login"},"Login")),c.a.createElement("li",null,c.a.createElement(r.b,{to:"/register"},"Register"))))))}),p=(a(36),a(37),function(e){var t=e.onEndPointFetch,a=e.match_id,n=e.setStateMatches,s=e.setStateMessageDetailed,l=e.user_id,r=e.onSetStatePlayerMatches,o=e.setStateMatchDetailed,h=e.detailed_match;return c.a.createElement("input",{onClick:function(){console.log("Joined the match! Not yet though..."),t("put","/joinmatch/".concat(a),{user_id:l}).then((function(e){if("the match joined successfully"!==e.message)return h?s(e.message):null;n(e.data)})).catch(console.log),t("get","/joinedmatches/".concat(l)).then((function(e){if("user matches fetched successfully"!==e.message)return h?s(e.message):null;r(e.data)})).catch(console.log),h&&t("get","/match/".concat(a)).then((function(e){"match found"===e.message?o(e.data):s(e.message)})).catch(console.log)},type:"button",value:"Join The Match Button Component"})}),_=(a(38),function(e){var t=e.onEndPointFetch,a=e.match_id,n=e.setStateMatches,s=e.setStateMessageDetailed,l=e.user_id,r=e.onSetStatePlayerMatches,o=e.setStateMatchDetailed,h=e.detailed_match;return c.a.createElement("input",{onClick:function(){console.log("Unjoined the match! Not yet though..."),t("delete","/unjoinmatch/".concat(a),{user_id:l}).then((function(e){"the match unjoined successfully"===e.message?n(e.data):s(e.message)})).catch(console.log),t("get","/joinedmatches/".concat(l)).then((function(e){if("user matches fetched successfully"!==e.message)return h?s(e.message):null;r(e.data)})).catch(console.log),h&&t("get","/match/".concat(a)).then((function(e){if("match found"!==e.message)return h?s(e.message):null;o(e.data)})).catch(console.log)},type:"button",value:"Unjoin The Match Button Component"})}),E=function(e){var t=e.onEndPointFetch,a=e.setStateMatches,n=e.logged_user,s=e.onSetStatePlayerMatches,l=e.match;return c.a.createElement("div",null,c.a.createElement("h3",null,"Match Preview Component"),c.a.createElement("p",null,"match name: ",l.match_name),c.a.createElement("p",null,"match id: ",l.match_id),c.a.createElement("p",null,"players signed up: ",l.users_signed_up.length),c.a.createElement("p",null,"date start: ",new Date(l.date_start).toLocaleString()),c.a.createElement(r.b,{to:"/match/".concat(l.match_id)},c.a.createElement("input",{type:"button",value:"Details"})),new Date(l.date_start)>Date.now()?function(){var e=n.name,o=n.joined_matches,h=l.match_id;return console.log("name:",e),console.log("joined matches:",o),console.log("id:",h),console.log("match:",l),e&&!o.some((function(e){return Number(e.match_id)===Number(h)}))?(console.log("join the match"),c.a.createElement(p,{onEndPointFetch:t,match_id:h,setStateMatches:a,user_id:n.id,onSetStatePlayerMatches:s})):e&&o.some((function(e){return Number(e.match_id)===Number(h)}))?(console.log("unjoin the match"),c.a.createElement(_,{onEndPointFetch:t,match_id:h,setStateMatches:a,user_id:n.id,onSetStatePlayerMatches:s})):(console.log("login to join the match"),c.a.createElement(r.b,{to:"/login"},"Login to join the match"))}():null)},S=(a(39),function(e){var t=e.matches,a=e.logged_user,n=e.setStateMatches,s=e.onSetStatePlayerMatches,l=e.onEndPointFetch,r=e.weather;return c.a.createElement("div",null,c.a.createElement("h1",null,"Home Container"),c.a.createElement("p",null,"Demo credentials: email: world@gmail.com, pass: world"),r?c.a.createElement("div",{className:"weather-section"},c.a.createElement("div",null,c.a.createElement("h4",null,"Weather Today"),c.a.createElement("h5",null,"Summary: ",r.summary),c.a.createElement("h5",null,"Temperature: ",r.temperature),c.a.createElement("h5",null,"Wind Speed: ",r.windSpeed))):null,c.a.createElement("div",{className:"home-matches"},c.a.createElement("ul",null,c.a.createElement("h2",null,"Current Matches preview"),t.filter((function(e){return new Date(e.date_start)<Date.now()&&new Date(e.date_end)>Date.now()})).filter((function(e,t){return t<3})).map((function(e){return c.a.createElement("li",{key:e.match_id},c.a.createElement(E,{match:e}))}))),c.a.createElement("ul",null,c.a.createElement("h2",null,"Upcoming Matches preview"),t.filter((function(e){return new Date(e.date_start)>Date.now()})).filter((function(e,t){return t<3})).map((function(e){return c.a.createElement("li",{key:e.match_id},c.a.createElement(E,{match:e,logged_user:a,setStateMatches:n,onSetStatePlayerMatches:s,onEndPointFetch:l}))}))),c.a.createElement("ul",null,c.a.createElement("h2",null,"Finished Matches preview"),t.filter((function(e){return new Date(e.date_end)<Date.now()})).filter((function(e,t){return t<3})).map((function(e){return c.a.createElement("li",{key:e.match_id},c.a.createElement(E,{match:e}))})))))}),f=(a(40),function(e){var t=e.matches,a=e.logged_user,n=e.setStateMatches,s=e.onSetStatePlayerMatches,l=e.onEndPointFetch;return c.a.createElement("div",null,c.a.createElement("h1",null,"Matches Container"),c.a.createElement("ul",null,c.a.createElement("h2",null,"Current Matches preview"),t.filter((function(e){return new Date(e.date_start)<Date.now()&&new Date(e.date_end)>Date.now()})).map((function(e){return c.a.createElement("li",{key:e.match_id},c.a.createElement(E,{match:e}))}))),c.a.createElement("ul",null,c.a.createElement("h2",null,"Upcoming Matches preview"),t.filter((function(e){return new Date(e.date_start)>Date.now()})).map((function(e){return c.a.createElement("li",{key:e.match_id},c.a.createElement(E,{match:e,logged_user:a,joined_matches:a.joined_matches.map((function(e){return e.match_id})),setStateMatches:n,onEndPointFetch:l,onSetStatePlayerMatches:s}))}))),c.a.createElement("ul",null,c.a.createElement("h2",null,"Finished Matches preview"),t.filter((function(e){return new Date(e.date_end)<Date.now()})).map((function(e){return c.a.createElement("li",{key:e.match_id},c.a.createElement(E,{match:e}))}))))}),y=(a(41),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).setStateMessageDetailed=function(e){a.setState({message:e})},a.setStateMatchDetailed=function(e){a.setState({match:e})},a.renderMatchAction=function(){var e=a.props.logged_user,t=e.name,n=e.joined_matches,s=a.props.match.params.id;return t&&!n.some((function(e){return Number(e.match_id)===Number(s)}))?(console.log("join the match"),c.a.createElement(p,{onEndPointFetch:a.props.onEndPointFetch,match_id:s,setStateMatches:a.props.setStateMatches,setStateMessageDetailed:a.setStateMessageDetailed,user_id:a.props.logged_user.id,onSetStatePlayerMatches:a.props.onSetStatePlayerMatches,setStateMatchDetailed:a.setStateMatchDetailed,detailed_match:!0})):t&&n.some((function(e){return Number(e.match_id)===Number(s)}))?(console.log("unjoin the match"),c.a.createElement(_,{onEndPointFetch:a.props.onEndPointFetch,match_id:s,setStateMatches:a.props.setStateMatches,setStateMessageDetailed:a.setStateMessageDetailed,user_id:a.props.logged_user.id,onSetStatePlayerMatches:a.props.onSetStatePlayerMatches,setStateMatchDetailed:a.setStateMatchDetailed,detailed_match:!0})):(console.log("login to join the match"),c.a.createElement(r.b,{to:"/login"},"Login to join the match"))},a.state={match:{match_id:"",match_name:"",date_start:"",date_end:"",venue:"",users_signed_up:[],users_attended:[],home_score:"0",away_score:"0",home_scorers:[],away_scorers:[],home_team:[],away_team:[]},match_weather:{temperature:"",summary:"",windSpeed:""},message:null},a}return Object(u.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.props.onEndPointFetch("get","/match/".concat(t)).then((function(t){"match found"===t.message?e.props.onEndPointFetch("get","/getweather/".concat(String(Math.round(new Date(t.data.date_start).getTime()/1e3)))).then((function(a){e.setState({match_weather:a,match:t.data})})).catch(console.log):e.setState({message:"There were issues with fetching the match. Please try again."})})).catch(console.log)}},{key:"render",value:function(){console.log(this.state.match_weather);var e=this.props.history.goBack;return c.a.createElement("div",null,c.a.createElement("p",{onClick:e}," Go Back"),c.a.createElement("h3",null,"Match Detailed Component"),c.a.createElement("h4",null,this.state.match.match_name),c.a.createElement("h4",null,this.state.match.match_id),c.a.createElement("h4",null,this.state.match.date_start),c.a.createElement("p",null,"Joined players: ",this.state.match.users_signed_up.length),c.a.createElement("p",null,"Players:",this.state.match.users_signed_up),c.a.createElement("h4",null,"Weather on the Day"),c.a.createElement("h5",null,"Summary: ",this.state.match_weather.summary),c.a.createElement("h5",null,"Temperature: ",this.state.match_weather.temperature),c.a.createElement("h5",null,"Wind Speed: ",this.state.match_weather.windSpeed),c.a.createElement(r.b,{to:"/updatematch/".concat(this.state.match.match_id)},c.a.createElement("input",{type:"button",value:"Edit"})),new Date(this.state.match.date_start)>Date.now()?this.renderMatchAction():null,this.state.message?c.a.createElement("p",null,this.state.message):null)}}]),t}(c.a.Component)),M=Object(d.g)(y),v=a(18),b=a(13),w=(a(42),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).onChangeHandler=function(e){a.setState({match:Object.assign({},a.state.match,Object(b.a)({},e.target.name,e.target.value))})},a.onSubmitHandler=function(e){e.preventDefault(),a.props.onEndPointFetch("post","/creatematch",a.state.match).then((function(e){console.log(e),"new match created successfully"===e.message?(a.props.setStateMatches(e.data),a.setState({match:{match_id:"",match_name:"",date_start:"",date_end:"",venue:"",users_signed_up:[],users_attended:[],home_score:"0",away_score:"0",home_scorers:[],away_scorers:[],home_team:[],away_team:[]},message:null,redirect:"/"})):(a.setState({message:"Please fill all inputs"}),console.log(e.message))})).catch(console.log)},a.state={match:{match_id:"",match_name:"",date_start:"",date_end:"",venue:"",users_signed_up:[],users_attended:[],home_score:"0",away_score:"0",home_scorers:[],away_scorers:[],home_team:[],away_team:[]},redirect:null,message:null},a}return Object(u.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"create-match"},c.a.createElement("form",{name:"form",onSubmit:this.onSubmitHandler},c.a.createElement("label",{htmlFor:"match_id"},"Match id"),c.a.createElement("input",{required:!0,id:"match_id",name:"match_id",type:"number",min:Math.max.apply(Math,Object(v.a)(this.props.matches.map((function(e){return e.match_id}))))+1,max:Math.max.apply(Math,Object(v.a)(this.props.matches.map((function(e){return e.match_id}))))+1,onChange:this.onChangeHandler,value:this.state.match.match_id}),c.a.createElement("label",{htmlFor:"match_name"},"Match name"),c.a.createElement("input",{required:!0,id:"match_name",name:"match_name",type:"text",onChange:this.onChangeHandler,value:this.state.match_name}),c.a.createElement("label",{htmlFor:"date_start"},"Match Start"),c.a.createElement("input",{required:!0,id:"date_start",name:"date_start",type:"datetime-local",onChange:this.onChangeHandler,value:this.state.match.date_start}),c.a.createElement("label",{htmlFor:"date_end"},"Match End"),c.a.createElement("input",{required:!0,id:"date_end",name:"date_end",type:"datetime-local",onChange:this.onChangeHandler,value:this.state.match.date_end}),c.a.createElement("label",{htmlFor:"venue"},"Venue"),c.a.createElement("input",{required:!0,id:"venue",name:"venue",type:"text",onChange:this.onChangeHandler,value:this.state.match.venue}),c.a.createElement("input",{type:"submit",value:"Submit"})),this.state.message?c.a.createElement("p",null,this.state.message):null,this.state.redirect?c.a.createElement(d.a,{to:this.state.redirect}):null)}}]),t}(c.a.Component)),j=(a(43),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).onChangeHandler=function(e){a.setState({match:Object.assign({},a.state.match,Object(b.a)({},e.target.name,e.target.value))})},a.onSubmitHandler=function(e){e.preventDefault(),a.props.onEndPointFetch("put","/updatematch/".concat(a.state.match.match_id),a.state.match).then((function(e){"match successfully updated"===e.message?(a.props.setStateMatches(e.data),a.setState({message:null,redirect:"/match/".concat(a.state.match.match_id)})):(a.setState({message:"Please fill all inputs"}),console.log(e.message))})).catch(console.log)},a.state={match:{match_id:"",match_name:"",date_start:"",date_end:"",venue:"",users_signed_up:[],users_attended:[],home_score:"0",away_score:"0",home_scorers:[],away_scorers:[],home_team:[],away_team:[]},redirect:null,message:null,name:{name:"karlo"}},a}return Object(u.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.props.onEndPointFetch("get","/match/".concat(t)).then((function(t){"match found"===t.message?e.setState({match:t.data}):e.setState({message:"There were issues with fetching the match. Please try again."})})).catch(console.log),this.props.onEndPointFetch("put","/updatematch/".concat(4),this.state.name).then((function(e){return console.log("tu",e)})).catch(console.log)}},{key:"render",value:function(){return c.a.createElement("div",{className:"create-match"},c.a.createElement("p",{onClick:this.props.history.goBack}," Go Back"),c.a.createElement("form",{name:"form",onSubmit:this.onSubmitHandler},c.a.createElement("label",{htmlFor:"match_id"},"Match id"),c.a.createElement("input",{required:!0,id:"match_id",name:"match_id",type:"number",readOnly:!0,value:this.state.match.match_id}),c.a.createElement("label",{htmlFor:"match_name"},"Match name"),c.a.createElement("input",{required:!0,id:"match_name",name:"match_name",type:"text",onChange:this.onChangeHandler,value:this.state.match.match_name}),c.a.createElement("label",{htmlFor:"date_start"},"Match Start"),c.a.createElement("input",{required:!0,id:"date_start",name:"date_start",type:"datetime-local",onChange:this.onChangeHandler,value:this.state.match.date_start}),c.a.createElement("label",{htmlFor:"date_end"},"Match End"),c.a.createElement("input",{required:!0,id:"date_end",name:"date_end",type:"datetime-local",onChange:this.onChangeHandler,value:this.state.match.date_end}),c.a.createElement("label",{htmlFor:"venue"},"Venue"),c.a.createElement("input",{required:!0,id:"venue",name:"venue",type:"text",onChange:this.onChangeHandler,value:this.state.match.venue}),c.a.createElement("input",{type:"submit",value:"Submit"})),this.state.message?c.a.createElement("p",null,this.state.message):null,this.state.redirect?c.a.createElement(d.a,{to:this.state.redirect}):null)}}]),t}(c.a.Component)),P=Object(d.g)(j),F=(a(44),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).onChangeHandler=function(e){a.setState({login:Object.assign({},a.state.login,Object(b.a)({},e.target.name,e.target.value))})},a.onSubmitHandler=function(e){e.preventDefault(),console.log(a.state.login),a.props.onEndPointFetch("post","/login",a.state.login).then((function(e){"user logged in successfully"===e.message?(a.props.setStateLoggedUser(e.data.id,e.data.name,e.data.email,e.data.joined_matches),a.props.onEndPointFetch("get","/joinedmatches/".concat(e.data.id)).then((function(e){"user matches fetched successfully"===e.message?(a.props.onSetStatePlayerMatches(e.data),a.setState({message:null,redirect:"/"})):a.setState({message:e.message})}))):a.setState({message:e.message})})).catch(console.log)},a.state={login:{email:"",password:""},redirect:null,message:null,logged_id:null},a}return Object(u.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"login"},c.a.createElement("form",{name:"form",onSubmit:this.onSubmitHandler},c.a.createElement("label",{htmlFor:"email"},"Email"),c.a.createElement("input",{required:!0,id:"email",name:"email",type:"email",value:this.state.login.email,onChange:this.onChangeHandler}),c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{required:!0,id:"password",name:"password",type:"password",value:this.state.login.password,onChange:this.onChangeHandler}),c.a.createElement("input",{type:"submit",value:"Login"})),this.state.message?c.a.createElement("p",null,this.state.message):null,this.state.redirect?c.a.createElement(d.a,{to:this.state.redirect}):null)}}]),t}(c.a.Component)),D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).setStateMatches=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a.setState({matches:e.slice().sort((function(e,t){return new Date(e.date_start)-new Date(t.date_start)}))})},a.setStateLoggedUser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];a.setState({logged_user:{id:e,name:t,email:n,joined_matches:c}})},a.onSetStatePlayerMatches=function(e){a.setState({logged_user:Object.assign({},a.state.logged_user,{joined_matches:e})})},a.onSetStateMatchWeather=function(e){a.setState({match_weather:e})},a.onEndPointFetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;return fetch("https://immense-inlet-39261.herokuapp.com".concat(t),{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch(console.log)},a.state={matches:[],logged_user:{id:"",name:"",email:"",joined_matches:[]},home_weather:{},match_weather:{}},a}return Object(u.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.onEndPointFetch("get").then((function(t){return e.setStateMatches(t)})).catch(console.log),this.onEndPointFetch("get","/getweather/".concat(String(Math.round((new Date).getTime()/1e3)))).then((function(t){e.setState({home_weather:t})})).catch(console.log)}},{key:"render",value:function(){return console.log(this.state.home_weather),c.a.createElement("div",null,c.a.createElement(g,{logged_user:this.state.logged_user,setStateLoggedUser:this.setStateLoggedUser}),c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:"/"},c.a.createElement(S,{matches:this.state.matches,logged_user:this.state.logged_user,setStateMatches:this.setStateMatches,onEndPointFetch:this.onEndPointFetch,onSetStatePlayerMatches:this.onSetStatePlayerMatches,weather:this.state.home_weather})),c.a.createElement(d.b,{path:"/matches"},c.a.createElement(f,{matches:this.state.matches,logged_user:this.state.logged_user,setStateMatches:this.setStateMatches,onEndPointFetch:this.onEndPointFetch,onSetStatePlayerMatches:this.onSetStatePlayerMatches})),c.a.createElement(d.b,{path:"/match/:id"},c.a.createElement(M,{matches:this.state.matches,logged_user:this.state.logged_user,joined_matches:this.state.logged_user.joined_matches.map((function(e){return e.match_id})),setStateMatches:this.setStateMatches,onEndPointFetch:this.onEndPointFetch,onSetStatePlayerMatches:this.onSetStatePlayerMatches,weather:this.state.match_weather.currently,onSetStateMatchWeather:this.onSetStateMatchWeather})),c.a.createElement(d.b,{path:"/creatematch"},c.a.createElement(w,{matches:this.state.matches,onEndPointFetch:this.onEndPointFetch,setStateMatches:this.setStateMatches})),c.a.createElement(d.b,{path:"/updatematch/:id"},c.a.createElement(P,{onEndPointFetch:this.onEndPointFetch,setStateMatches:this.setStateMatches})),c.a.createElement(d.b,{path:"/login"},c.a.createElement(F,{setStateLoggedUser:this.setStateLoggedUser,onEndPointFetch:this.onEndPointFetch,onSetStatePlayerMatches:this.onSetStatePlayerMatches}))))}}]),t}(c.a.Component);l.a.render(c.a.createElement(r.a,null,c.a.createElement(D,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.8b1cbd5c.chunk.js.map